		@(isAuthenticated: Boolean)

@main("stravoski") {
<div class="col-md-8">
	@if(!isAuthenticated){
    
    <h2>Stravoski uses Strava API to connect to your account</h2>
    <p>By authorizing an application you are still under Strava's Terms of Service</p>
    
	<div class="panel panel-success">
  		<div class="panel-heading">
    		<h3 class="panel-title">Amongst other things, this application will be able</h3>
  		</div>
  		<div class="panel-body">
  		<ul>
			<li>Access your name, location and email address</li>
			<li>Access your activity data</li>
			<li>Display public data related to those activities</li> 
			<li>Read your public profile data</li>
		<ul>
  		</div>
	</div>
	
	<div class="panel panel-warning">
  		<div class="panel-heading">
    		<h3 class="panel-title">This application will not be able</h3>
  		</div>
  		<div class="panel-body">
  		<ul>
	    	<li>Upload activities for you</li>
			<li>See private data on your activities</li>
			<li>Post comments or kudos for you</li>
			<li>Change your profile information</li>
		</ul>
  		</div>
	</div>
	
	<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">Continue with login</h3>
		</div>
		<div class="panel-body">	
			<form class="form-vertical">
			  <fieldset>
				<div class="form-group">
					<button id="logInWithStrava" class="btn btn-primary btn-lg">
					Log In With Strava
					</button>
				</div>
				</fieldset>
			</form>
		</div>
	</div>
	
	<script type="text/javascript">
		document.getElementById("logInWithStrava").onclick = function() {
			location.href = "/login";
			return false;
			};
	</script>
	} else {
	
	<script type="text/ng-template" id="modalContent.html">
        <div class="modal-header">
	        <h4 class="modal-title">{{messageTitle}}</h3>
    	</div>
    	<div class="modal-body">
			<div class="row">
        		<div class="col-md-8">
          			{{messageBody}}
        		</div>
      		</div>
		</div>
        <div class="modal-footer">
	        <button class="btn btn-primary" ng-click="ok()">OK</button>
    	</div>
	</script>
	
	<script type="text/ng-template" id="modalDialogActivityDetails.html">
        <div class="modal-header">
	        <h4 class="modal-title">{{messageTitle}}</h3>
    	</div>
    	<div class="modal-body">
			<div class="row">
        		<div class="col-md-3" ng-hide="messageImage == ''" >
          			<img ng-src="{{messageImage}}" style="width: 150px ; height: 150px ;"/>
        		</div>
        		<div class="col-md-9">
					<table class="table table-striped table-hover ">
  						<tbody>
    						<tr>
							<td>You skied <b>{{messageBody.distance}} km</b> including <b>{{messageBody.downhill_distance}} km</b> descents</td>
    						</tr>
    						<tr>
							<td>Skiing resort area {{messageBody.location}}</td>
    						</tr>
    						<tr>
							<td>Time spent <b>{{messageBody.elapsed_time}}</b> including <b>{{messageBody.moving_time}}</b> moving time</td>
    						</tr>
    						<tr>
							<td>Maximum speed recorder <b>{{messageBody.max_speed}} km/h</b> and average speed was <b>{{messageBody.average_speed}} km/h</b> </td>
    						</tr>
  						</tbody>
					</table>
        		</div>
      		</div>
		</div>
        <div class="modal-footer">
	        <button class="btn btn-primary" ng-click="ok()">OK</button>
    	</div>
	</script>	
	<script type="text/ng-template" id="modalDialogFriendCompareContent.html">
        <div class="modal-header">
	        <h4 class="modal-title">{{messageTitle}}</h3>
    	</div>
    	<div class="modal-body">
			<div class="row">
			<table class="table table-striped table-hover ">
  				<thead>
	    			<tr>
					<th></th>
      				<th>You</th>
      				<th>{{messageBody.friendsName}}</th>
				    </tr>
  				</thead>
  				<tbody>
    				<tr>
					<td>Total distance, km</td>
      				<td>{{messageBody.yoursTotalDistance / 1000 | number:0}}</td>
      				<td>{{messageBody.friendsTotalDistance / 1000 | number:0}}</td>
    				</tr>
    				<tr>
					<td>Longest distance in one day, km</td>
      				<td>{{messageBody.yoursLongestDayActivityDistance / 1000 | number:0}}</td>
      				<td>{{messageBody.friendsLongestDayActivityDistance / 1000 | number:0}}</td>
    				</tr>
    				<tr>
					<td>Skied in this season, km</td>
      				<td>{{messageBody.yoursSkiedKmThisSeason / 1000 | number:0}}</td>
      				<td>{{messageBody.friendsSkiedKmThisSeason / 1000 | number:0}}</td>
    				</tr>
  				</tbody>
			</table>
      		</div>
		</div>
        <div class="modal-footer">
	        <button class="btn btn-primary" ng-click="ok()">OK</button>
    	</div>
	</script>
	
	<div class="panel panel-default">
	  <div class="panel-heading">Your activities</div>
	  <div class="panel-body">
	  	<div ng-show="isLoadingActivities" class="alert alert-dismissible alert-info">
  			<strong>Heads up!</strong> Your activities are being syncronized now, please keep calm and wait a bit.
		</div>
	  	<div ng-show="isUpdatingSkiTracks" class="alert alert-dismissible alert-info">
  			<strong>We still are doing some magic in background.</strong> Your ski activities are being processing now, it can take some time. You can use the system however skied distanse without lifts will remain as zero till the end of this process.
		</div>
	  
	   	<ul ng-repeat="activity in pagedActivities" class="list-group">
      		<li class="list-group-item">
      			<span class="badge">{{activity.distance / 1000 | number:2}} km</span>
      			{{activity.start_date | date}} <a ng-click="modalDialogActivityDetails(activity)">{{activity.name}}</a>
      			</li>
    	</ul>
    	<center>
    	<button class="btn" href="#" 
    		ng-class="nextPageDisabledClass(activitiesCurrentPage, pageCount(activities.length, activitiesPerPage), activities.length)" 
    		ng-click="loadMoreActivities()">Load More</button>
    	</center>
      </div>
  	</div>	
	}
</div>
 <div class="col-md-4">
 @if(isAuthenticated){

	<div class="panel panel-default">
		  <div class="panel-heading">Skiing profile</div>
		  <div class="panel-body" ng-hide="statistics.isempty || isLoadingActivities">
		    <p>Your profile stores {{statistics.skiedYearsHistory}} years of skiing.<br/>
		    Skied <strong>{{statistics.skiedDaysThisSeason}} days</strong> with <strong>{{statistics.skiedKmThisSeason / 1000 | number:0}} km</strong> in <strong>current season</strong>
		    <a href="#" data-toggle="tooltip" title="Season in our current version means year. However later we plan to add ability to customize meaning of seasons.">*</a>,<br/>
		    {{statistics.skiedDaysLastSeason}} days with {{statistics.skiedKmLastSeason / 1000 | number:0}} km in previous season and <strong>{{statistics.totalDistance / 1000 | number:0}} km from beginning</strong>.</p>
		    <p>Longest skiing day at <a ng-click="modalDialogActivityDetails(statistics.longestDayActivity)">{{statistics.longestDayActivity.start_date | date}}</a> with {{statistics.longestDayActivity.distance / 1000 | number:0}} km</p>
		  </div>
	</div>
	
	<div class="panel panel-default">
		  <div class="panel-heading">Compare to Friends</div>
		  <div class="panel-body">
		  	<div ng-show="isLoadingFriends" class="alert alert-dismissible alert-info">
	  			<strong>Friends Will Be Friends!</strong> Are your friends skiing as well? Their activities should be here shortly.
			</div>
			<ul ng-repeat="friend in pagedFriends" class="list-group">
      			<li class="list-group-item"><a ng-click="modalDialogFriendCompare(friend.id)">{{friend.firstname}} {{friend.lastname}}</a></li>
      		</ul>
	    	<center>
		    	<button class="btn" href="#"
		    		ng-class="nextPageDisabledClass(friendsCurrentPage, pageCount(friends.length, friendsPerPage), friends.length)" 
		    		ng-click="loadMoreFriends()">View More</button>
	    	</center>
		  </div>
	</div> 	
 	}
</div>

}
